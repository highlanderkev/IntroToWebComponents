<link rel="import" href="/bower_components/polymer/polymer.html">

<!--Custom-->
<link rel="import" href="./storyControl.html">
<link rel="import" href="./draggable.html">
<dom-module name="p-grid">
    <template>
        <style>
            .grid {
                width: 100%;
                height: 100%;
            }
        </style>
        <div id="grid">
            <p-storyControl id="control" title="test"></p-storyControl>
            <div id="placeholder"></div>
            <p-drag>
                Test
            </p-drag>
        </div>
    </template>
    
    <script>
        (function(document, Polymer){
            "use strict";

            Polymer({
                is: "p-grid",
                ready: function(){
                    console.log(this.$.control);
                    var grid = this;
                    // this.$.control.addEventListener("kick", function(e){
                    //     console.log(e.detail.kicked);
                    //     grid.addDraggable(e.detail.kicked);
                    // });
                    this.$.control.addEventListener("kick", this.addDraggable("test"));
                },
                addDraggable: function(item){
                    console.log(item);
                    var draggable = document.createElement("p-drag");
                    Polymer.dom(this.$.grid).insertBefore(draggable, this.$.placeholder);
                }
            });
            
            // document.querySelector("control").addEventListener('kick', function (e) {
            //     console.log(e.detail.kicked); // true
            // });
        })(document, Polymer);
    </script>
</dom-module>